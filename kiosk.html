<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Order Kiosk</title>
  <link rel="stylesheet" href="kiosk.css" />
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style" onload="this.rel='stylesheet'">
  <noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  </noscript>
</head>
<body>
  <main class="kiosk-main">
    <!-- Login section -->
    <section id="login-section" class="kiosk-panel kiosk-login">
      <h2>Order Kiosk</h2>
      <p>Welcome! Enter your details to begin</p>
      <form id="login-form" autocomplete="off">
        <label>
          First Initial
          <input type="text" id="first-initial" maxlength="1" required autofocus placeholder="e.g. J" pattern="[A-Za-z]"/>
        </label>
        <label>
          Last Name
          <input type="text" id="last-name" required placeholder="e.g. Smith" pattern="[A-Za-z]{1,32}"/>
        </label>
        <button type="submit">
          <span>Begin Order</span>
          <i class="fas fa-arrow-right"></i>
        </button>
      </form>
    </section>

    <!-- Order section -->
    <section id="order-section" class="kiosk-panel kiosk-order" style="display:none">
      <header>
        <div>
          <span class="user-icon"><i class="fas fa-user"></i></span>
          <span id="username"></span>
          <span class="points-display"><i class="fas fa-star"></i> <span id="points-display">0</span></span>
          <button id="redeem-btn" class="redeem-button">
            <i class="fas fa-gift"></i> Redeem
          </button>
        </div>
        <button id="logout-btn" title="Log out"><i class="fas fa-sign-out-alt"></i> Log Out</button>
      </header>

      <!-- Category Tabs (Horizontal) -->
      <div class="category-tabs" id="category-tabs"></div>

      <!-- Items Grid -->
      <div class="items-grid" id="items-grid"></div>

      <!-- Footer -->
      <footer class="kiosk-footer">
        <div class="footer-columns">
          <div>
            <span>Items Selected</span>
            <span id="item-count" class="pill">0</span>
          </div>
          <div>
            <span>Order Total</span>
            <span id="order-total" class="total">$0.00</span>
          </div>
        </div>
        <button id="checkout-btn" disabled>
          <i class="fas fa-check"></i>
          <span>Finish &amp; Print</span>
        </button>
      </footer>
    </section>

    <!-- Receipt Modal -->
    <section id="receipt-modal" class="modal" style="display:none">
      <div class="modal-bg"></div>
      <article class="receipt-panel">
        <h3><i class="fas fa-receipt" style="margin-right: 0.5rem;"></i>Receipt</h3>
        <div id="receipt-content"></div>
        <div class="receipt-success">
          <i class="fas fa-check-circle"></i>
          <p>Thank you for your order!</p>
          <p style="font-size: 0.9rem; margin-top: 0.5rem;">Logging out...</p>
        </div>
      </article>
    </section>

    <!-- Redeem Modal -->
    <section id="redeem-modal" class="modal" style="display:none">
      <div class="modal-bg"></div>
      <article class="redeem-panel">
        <h3><i class="fas fa-gift" style="margin-right: 0.5rem;"></i>Redeem Points</h3>
        <div id="redeem-content"></div>
        <div class="redeem-actions">
          <button id="cancel-redeem-btn" class="cancel-btn">Cancel</button>
          <button id="confirm-redeem-btn" class="confirm-btn">Confirm Redeem</button>
        </div>
      </article>
    </section>
  </main>
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.1/firebase-firestore-compat.js"></script>
  <script src="kiosk.js"></script>
</body>
</html>
